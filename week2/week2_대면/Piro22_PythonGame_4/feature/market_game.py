import random
import time

def market_game(me, name, players):
    itemList = ["ì‚¬ê³¼", "ê³ ë“±ì–´", "ì†Œì£¼", "ë§¥ì£¼", "ë¬¸ì–´", "ê°ˆì¹˜", "íœ´ëŒ€í°", "TV", 
                "ë…¸íŠ¸ë¶", "ì»µ", "íœ´ì§€", "ë¬¼í‹°ìŠˆ", "ë°”ë‚˜ë‚˜", "ì»¤í”¼", "ì½œë¼", "ì´ˆì½œë¦¿", 
                "ìš°ìœ ", "ë¹µ", "ê³„ë€", "ì¹˜í‚¨", "í”¼ì", "í–„ë²„ê±°", "ì¼€ì´í¬", "ì»µë¼ë©´", 
                "ë–¡", "ì˜¤ì´", "ë°°ì¶”", "ë‹¹ê·¼", "ê°ì", "ê³ êµ¬ë§ˆ", "ì–‘íŒŒ", "ë§ˆëŠ˜", "ìƒê°•", 
                "ê³ ì¶”", "í”¼ë§", "íŒŒí”„ë¦¬ì¹´", "í† ë§ˆí† ", "ê¹€ì¹˜", "ëœì¥", "ê³ ì¶”ì¥", "ê°„ì¥", 
                "ë¸”ë™íƒ€ì´ê±°ìƒˆìš°", "í™ˆëŸ°ë³¼", "í¬ì¹´ì¹©", "ìƒˆìš°ê¹¡", "ì´ˆì½”íŒŒì´", "ì¸„ëŸ¬ìŠ¤", 
                "í¬ë„", "ì°¸ì™¸", "ë©”ë¡ ", "ì™€ì¸", "ë§‰ê±¸ë¦¬", "ì‚¬ì´ë‹¤", "ì´ˆì½”ìš°ìœ ", "ê»Œ", 
                "ì°¸ì´ìŠ¬", "ë³„ë¹›ì²­í•˜", "ë§¤í™”ìˆ˜", "ì˜¤ë Œì§€ì£¼ìŠ¤", "ë–¡ë³¶ì´", "ìˆœëŒ€", "íŠ€ê¹€", 
                "ëƒ‰ë©´", "ìˆœë‘ë¶€ì°Œê°œ", "ì´ˆë°¥", "ê¹€ë°¥", "ê°", "ìƒ¤ì¸ë¨¸ìŠ¤ìº£", "ì˜¤ë¦¬ê³ ê¸°", 
                "ì „ë³µ", "ë°©ì–´", "ê´‘ì–´", "ì°¸ì¹˜", "ì—°ì–´", "ë³´ì¡°ë°°í„°ë¦¬", "í—¤ë“œì…‹", "ì˜ì", 
                "ì±…ìƒ", "í”„ë¦°í„°", "ì´ì–´í°", "íœ´ëŒ€í°ì¼€ì´ìŠ¤", "ë§ì¹˜", "í†±", "ë‚˜ì‚¬", "ë“œë¼ì´ë²„", 
                "ë…¸íŠ¸", "ìì„", "í…Œì´í”„", "í¸ì§€ì§€", "ë´‰íˆ¬", "ì—½ì„œ", "ìŠ¤í‹°ì»¤", "ë³¼íœ", 
                "ì•¼êµ¬ê³µ", "ì¶•êµ¬ê³µ", "ë³¼ë§ê³µ", "ì¥ê°‘", "ëª¨ì", "ì–‘ë§", "ë°”ì§€", "ì²­ë°”ì§€", 
                "ì¹˜ë§ˆ", "ì›í”¼ìŠ¤", "ì½”íŠ¸", "íŒ¨ë”©", "ë§¨íˆ¬ë§¨", "ìš°ëŸ­", "í•¸ë“œí¬ë¦¼", "ë½ìŠ¤", 
                "ì„¸ì œ", "ìˆ˜ê±´", "ë©´ë„ê¸°", "ì˜ì–‘ì œ", "ë¹—", "ë¦½ë°¤", "ì„ í¬ë¦¼", "ë¼ì´í„°"]

    print("===========================================================================================")
    print('''
    â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
    â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ         â–ˆâ–ˆ        â–ˆâ–ˆ       â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ      
    â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆ        â–ˆâ–ˆ   â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   
    â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ         â–ˆâ–ˆ        â–ˆâ–ˆ    â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ  â–ˆâ–ˆ  â–ˆâ–ˆ â–ˆâ–ˆ      
    â–ˆâ–ˆ      â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆ         â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ   â–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
    ''')
    print("===========================================================================================")
    time.sleep(1)
    print("ì‹œì¥ì— ê°€ë©´ ê²Œì„ì€ ", end="")
    time.sleep(1)
    print("ì‹œì¥ì— ìˆëŠ” ë¬¼ê±´ì„ ë§í•˜ëŠ” ê²Œì„ìœ¼ë¡œ,")
    time.sleep(1)
    print("ì¤‘ë³µë˜ë©´ ì•ˆ ë˜ë©° ë§í•œ ìˆœì„œëŒ€ë¡œ ë§í•´ì•¼ í•©ë‹ˆë‹¤!\n")
    time.sleep(1)
    print("ì½˜ì†”ì—ëŠ” ë¬¼ê±´ì˜ ì´ë¦„ë§Œ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤!\n")
    time.sleep(1)
    print("ì¤€ë¹„ë˜ì…¨ë‚˜ìš”? ê·¸ëŸ¼ ì‹œì‘í•©ë‹ˆë‹¤~")
    time.sleep(1)

    print("\n===== ì‹œì¥ì— ê°€ë©´~ =====")
    time.sleep(1)
    print("\n===== ì‹œì¥ì— ê°€ë©´~ =====\n")
    time.sleep(1)

    count = 1
    gameItemList = []
    randomCeil = random.randint(13, 18)
    start_index = next((i for i, player in enumerate(players) if player.name == name), 0)
    players = players[start_index:] + players[:start_index]
    randomCount = random.randint(8, 12)
    while True:
        for player in players:
            if player.name == me:
                print(f"\n{player.name} : ì‹œì¥ì— ê°€ë©´~ ", end="")
                time.sleep(1)
                for i in range(count):
                    gameItemListLength = len(gameItemList)
                    myItem = input("")
                    if i >= gameItemListLength:
                        if myItem in gameItemList:
                            print("ì´ë¯¸ ìˆëŠ” ë¬¼ê±´ì´ì—ìš”ğŸ˜‚")
                            return [player]
                        gameItemList.append(myItem)
                        print(gameItemList[i] + "ë„ ìˆê³  ~ ", end="")
                    elif myItem == gameItemList[i]:
                        print(gameItemList[i] + "ë„ ìˆê³  ~ ", end="")
                    else:
                        time.sleep(1)
                        print("\nì•„~ ìˆœì„œê°€ í‹€ë ¸ì–´ìš”ğŸ˜‚")
                        return [player]
                count += 1
            else:
                print(f"\n{player.name} : ì‹œì¥ì— ê°€ë©´~ ", end="")
                time.sleep(1)
                for i in range(count):
                    gameItemListLength = len(gameItemList)
                    if randomCount <= count:
                        print("ì–´...")
                        time.sleep(1)
                        print("ì•„~ ìˆœì„œê°€ í‹€ë ¸ì–´ìš”ğŸ˜‚")
                        return [player]
                    if randomCeil <= count:
                        print("\n\n#####ì ê¹!##### ìŠ¹ë¶€ê°€ ë„ˆë¬´ ì•ˆ ë‚˜ëŠ”ë°?")
                        time.sleep(1)
                        print("ëª»í•  ê²ƒ ê°™ì€ë° ê·¸ëƒ¥ ì´ë²ˆ ì‚¬ëŒì´ ë¨¹ì~")
                        time.sleep(1)
                        print(player.name + " : ì•ˆ ë¼ğŸ˜‚")
                        return [player]
                    if i >= gameItemListLength:
                        item = random.choice(itemList)
                        while item in gameItemList:
                            item = random.choice(itemList)
                        gameItemList.append(item)
                        print(gameItemList[i] + "ë„ ìˆê³  ~ ", end="")
                        continue
                    item = gameItemList[i]
                    if item == gameItemList[i]:
                        print(gameItemList[i] + "ë„ ìˆê³  ~ ", end="")
                count += 1
            print("\n")
